!function(e){var o={project:"",version:"1.0",dev:"prd",isSPA:!0,checkVisible:!1},t=!1,n="http://lncs-cc-maidian-wgq-stg1-web-padis.paic.com.cn/api/jssdk/logs",i="http://lncs-cc-maidian-wgq-stg1-web-padis.paic.com.cn/api/jssdk/customersinfo",a="",s="",r=!1,c=location.href,l=(new Date).getTime(),d=localStorage.paMonitorCustomerUniqueKey;function p(){a="",s="",r=!1,c=location.href,l=(new Date).getTime()}var g=new u;function u(){}u.prototype.setConfig=function(e){Object.assign(o,e),console.log("JSSDK OUTPUT: config "+o)},u.prototype.getUid=function(){for(var e=(new Date).getTime(),o="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",t=o.length,n="",i=0;i<18;++i)n+=o.charAt(Math.floor(Math.random()*t));return n+"-"+e},u.prototype.getCustomerUnqKey=function(){if(!d){var e=this.getUid(),o={id:e,is_login_id:!1};g.ajax(i,!1,{userInfo:o},(function(o){"100001"==o.code&&(console.log("JSSDK OUTPUT: user information send successed"),localStorage.paMonitorCustomerUniqueKey=e,d=e)}),(function(){console.log("JSSDK OUTPUT: user information send failed")}))}return localStorage.paMonitorCustomerUniqueKey},u.prototype.getCustomerInfo=function(e){g.ajax(i,!0,{userInfo:Object.assign(e,{is_login_id:!0})},(function(o){"100001"==o.code&&(console.log("JSSDK OUTPUT: user information send successed"),localStorage.paMonitorCustomerUniqueKey=e.id,d=e.id)}),(function(){console.log("JSSDK OUTPUT: user information send failed")}))},u.prototype.getDeviceInfo=function(){var e={},o=navigator.userAgent;if(e.deviceName="PC",-1==o.indexOf("Mobile")){var t=navigator.userAgent.toLowerCase();if(e.browserName="Unknown",t.indexOf("msie")>0){var n=t.match(/msie [\d.]+;/gi)[0];e.browserName=n.split("/")[0],e.browserVersion=n.split("/")[1]}if(t.indexOf("chrome")>0){n=t.match(/chrome\/[\d.]+/gi)[0];e.browserName=n.split("/")[0],e.browserVersion=n.split("/")[1]}}return e},u.prototype.ajax=function(e,o,t,n,i){!1!==o&&(o=!0);var a=new XMLHttpRequest;a.open("POST",e,o),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){if(4==a.readyState)if(200==a.status){var e=JSON.parse(a.responseText);"function"==typeof n&&n(e)}else"function"==typeof i&&i()},a.send("data="+JSON.stringify(t))};var f=g.getUid();function h(){this.project=o.project,this.sdk_version=o.version,this.project_env=o.dev,this.time=(new Date).getTime(),this.page_session=f,this.distinct_id=g.getCustomerUnqKey()}function S(e,o,t){h.apply(this),this.href_url=c,this.event=o,this.on_page_time=t;var n=g.getDeviceInfo();this.upload_type=e,this.device_name=n.deviceName,this.browser_name=n.browserName,this.browser_version=n.browserVersion}function m(){console.log("JSSDK OUTPUT: come in")}function v(o){var t=e.history[o];return function(){var o=t.apply(this,arguments);const n=new Event("popstate");return n.arguments=arguments,e.dispatchEvent(n),o}}function T(e,o){new S("PV",e,o).handle()}function U(){var e=(new Date).getTime();a=e-l,console.log("JSSDK OUTPUT: page stage time "+a),o.checkVisible&&r&&(a-=s,console.log("JSSDK OUTPUT: page stage time "+a))}S.prototype.handle=function(){var e=localStorage[this.upload_type]?localStorage[this.upload_type]:"";localStorage.PV=e+JSON.stringify(this)+"$$$"},m.prototype.init=function(e){var t;g.setConfig(e),setInterval((function(){var e=localStorage.PV;""!=e&&e.length>0&&g.ajax(n,t,{logInfo:e},(function(e){"100001"==e.code&&(console.log("JSSDK OUTPUT: reported to server"),localStorage.PV="")}),(function(){localStorage.PV="",console.log("JSSDK OUTPUT: report failed")}))}),3e4),this.handlePageLoad(),o.checkVisible&&this.checkPageVisible(),o.isSPA&&this.handleRouterChange()},m.prototype.handlePageLoad=function(){e.addEventListener("load",(function(){p(),T("page_load")})),e.addEventListener("beforeunload",(function(){t=!0,U(),T("page_beforeunload",a);var e=localStorage.PV;g.ajax(n,!1,{logInfo:e},(function(e){"100001"==e.code&&(localStorage.PV="",console.log("JSSDK OUTPUT: reported to server"))}),(function(){console.log("JSSDK OUTPUT: report failed")}))}))},m.prototype.handleRouterChange=function(){e.history.pushState=v("pushState"),e.history.replaceState=v("replaceState")},e.addEventListener("popstate",(function(){U(),T("beforeunload",a),p(),T("load")})),m.prototype.checkPageVisible=function(){if(void 0===document.hidden)console.log("JSSDK OUTPUT: The browser does not support the Page Visibility API.");else{var e="",o="";document.addEventListener("visibilitychange",(function(){1!=t&&("visible"==document.visibilityState?(e=(new Date).getTime(),s=s+e-o,console.log("JSSDK OUTPUT: totalNotOnPageTime "+s),T(e-o>=18e5?"load":document.visibilityState)):(r=!0,o=(new Date).getTime(),T(document.visibilityState),console.log("JSSDK OUTPUT: pageUnvisibleTime "+o)))}),!1)}},e.paMonitor=new m,e.paUtils=new u}(window);